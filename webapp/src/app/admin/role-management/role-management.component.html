<app-table-overview></app-table-overview>

<div class="d-flex justify-content-start">
  <button routerLink="create" nz-button nzType='primary' nzShape='round' class="btn-create">
    <i class="fas fa-plus"></i>
    Add a new role
  </button>
</div>
<table class="table table-sm table-striped table-responsive-sm">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Role Name</th>
      <th scope="col" class="text-center">Created By</th>
      <th scope="col" class="text-center">Granted</th>
      <th scope="col" class="text-center">Action</th>
    </tr>
  </thead>
  <tbody>
    <tr id="role-{{ role.id }}" *ngFor="let role of roles; index as i">
      <th>
        {{ i + 1 }}
      </th>
      <td>
        {{ role.name }}
      </td>
      <td class="text-center">
        <span *ngIf="role.createdBy !== currentUser.id; else byMe">
          {{ role.createdBy }}
        </span>
        <ng-template #byMe>
            <span class="badge badge-pill badge-danger label-byMe">Me</span>
        </ng-template>
      </td>
      <td class="text-center">
        <p class="my-auto">
          <nz-tag nzColor="error" *ngIf="role.allowDelete">deletable</nz-tag>
          <nz-tag nzColor="blue" *ngIf="role.allowUpdate">editable</nz-tag>
        </p>
      </td>
      <td class="text-center">
        <a class="btn btn-action mr-1" (click)="viewRoleDetails(role)"><i class="far fa-eye mr-0"></i></a>
        <a class="btn btn-action mr-1" (click)="openUpdateModal(role)"><i class="fas fa-edit mr-0"></i></a>
        <a class="btn btn-action mr-1" (click)="deleteRole(role)"><i class="fas fa-trash-alt"></i></a>
      </td>
    </tr>
  </tbody>
</table>